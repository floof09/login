{% macro form(class, action="#", method="post") %}
  <form class="luci-form{{ " " + class if class  }}" action="{{ action }}" method="{{ method }}">
    {% if caller %}
      {{ caller() }}
    {% endif %}
  </form>
{% endmacro %}

{% macro form_fieldset(class, name) %}
  <fieldset class="luci-form__fieldset{{ " " + class if class }}">
    <legend class="luci-form__label">{{ name }}</legend>
    {% if caller %}
      {{ caller() }}
    {% endif %}
  </fieldset>
{% endmacro %}

{% macro form_field_group(class) %}
  <div class="luci-form__field-group{{ " " + class if class }}">
    {% if caller %}
      {{ caller() }}
    {% endif %}
  </div>
{% endmacro %}

{% macro form_label(for, name, class) %}
  <label for="{{ for }}" class="luci-form__label{{ " " + class if class }}">{{ name }}</label>
{% endmacro %}

{% macro form_input(
    input_type="text",
    name,
    input_id=false,
    value,
    placeholder,
    required,
    disabled,
    readonly,
    autofocus,
    autocomplete,
    class,
    describedby) %}

    {% if input_id == false %}
      {% set input_id = "luci-input-" + range(0, 100000) | random %}
    {% endif %}
  <input
    type="{{ input_type }}"
    name="{{ name }}"
    id="{{ input_id }}"
    class="luci-form__input{{ " " + class if class }}"
    {% if value %} value="{{ value }}" {% endif %}
    {% if placeholder %} placeholder="{{ placeholder }}" {% endif %}
    {{ 'required' if required }}
    {{ 'disabled' if disabled }}
    {{ 'readonly' if readonly }}
    {{ 'autofocus' if autofocus }}
    {% if autocomplete %} autocomplete="{{ autocomplete }}" {% endif %}
    {% if describedby %} aria-describedby="{{ describedby }}"{% endif %}
  >
{% endmacro %}

{% macro form_radio(
    input_id=false,
    name="options",
    value="on",
    checked=true,
    label="Selected",
    class,
    describedby,
    disabled=false) %}

    {% if input_id == false %}
      {% set input_id = "luci-input-" + range(0, 100000) | random %}
    {% endif %}

  <span class="luci-form__radio">
    <label for="{{ input_id }}" class="luci-radio__label">
      <input
        type="radio"
        name="{{ name }}"
        id="{{ input_id }}"
        {% if class %} class="{{ class }}" {% endif %}
        {% if value %} value="{{ value }}" {% endif %}
        {{ 'checked' if checked }}
        {{ 'disabled' if disabled }}
        {% if describedby %} aria-describedby="{{ describedby }}" {% endif %}
      >
      <span class="luci-radio__button"></span>
      <span class="luci-radio__label-text">{{ label }}</span>
    </label>
  </span>
{% endmacro %}

{% macro form_checkbox(
    input_id=false,
    name="options",
    checked=true,
    label="Selected",
    class,
    describedby,
    value="on",
    disabled=false) %}

    {% if input_id == false %}
      {% set input_id = "luci-input-" + range(0, 100000) | random %}
    {% endif %}

  <span class="luci-form__checkbox">
    <label for="{{ input_id }}" class="luci-checkbox__label">
      <input
        type="checkbox"
        name="{{ name }}"
        id="{{ input_id }}"
        {% if class %} class="{{ class }}" {% endif %}
        value="{{ value }}"
        {{ 'checked' if checked }}
        {{ 'disabled' if disabled }}
        {% if describedby %} aria-describedby="{{ describedby }}" {% endif %}
      >
      <span class="luci-checkbox__button"></span>
      {% if label %}
        <span class="luci-checkbox__label-text">{{ label }}</span>
      {% endif %}
    </label>
  </span>
{% endmacro %}

{% macro form_select(
    class,
    name="states",
    id="select-01",
    describedby,
    options=[
      {
        value: '',
        label: 'Select a state',
        selected: true
      },
      {
        value: 'alabama',
        label: 'Alabama'
      },
      {
        value: 'alaska',
        label: 'Alaska'
      },
      {
        value: 'arizona',
        label: 'Arizona'
      }
    ],
    disabled=false) %}
  <span class="luci-form__select-wrapper{{" " + class if class }}">
    <select class="luci-form__select luci-form__input{{ " " + class if class }}" name="{{ name }}" id="{{ id }}" {{ 'disabled' if disabled }} {% if describedby %} aria-describedby="{{ describedby }}" {% endif %}>
      {% for option in options %}
        {% if option.selected %}
          <option class="luci-form__select-option" {% if value %} value="{{option.value}}"{% endif %} selected>{{ option.label }}</option>
          {% else %}
            <option class="luci-form__select-option" {% if value %} value="{{ option.value }}" {% endif %}>{{ option.label }}</option>
        {% endif %}
      {% endfor %}
    </select>
  </span>
{% endmacro %}

{% macro form_textarea(
    name="comments",
    id="comments",
    text,
    rows="4",
    cols="80",
    required,
    disabled,
    readonly,
    autofocus,
    describedby,
    class) %}
  <textarea name="{{ name }}" rows="{{ rows }}" cols="{{ cols }}" id="{{ id }}" class="luci-form__textarea luci-form__input{{ " " + class if class }}"
  {{ 'required' if required }}
  {{ 'disabled' if disabled }}
  {{ 'readonly' if readonly }}
  {{ 'autofocus' if autofocus }}
  {% if describedby %} aria-describedby="{{ describedby }}" {% endif %}>{{text}}</textarea>
{% endmacro %}

{% macro form_field_error(id, error_message) %}
  <span class="luci-form__field-error" {% if id %}id="{{ id }}"{% endif %} role="alert">{{ error_message }}</span>
{% endmacro %}

{% macro form_field_help(help_message="Enter date in mm/dd/yyyy", class) %}
  <span class="luci-form__field-help{{ " " + class if class }}">{{ help_message }}</span>
{% endmacro %}

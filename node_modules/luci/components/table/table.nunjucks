{% macro table(
  class,
  table_class,
  caption,
  selected=false,
  show_hide=false,
  headers,
  data,
  id=false) %}
  <div class="luci-table{{ " " + class if class }}">
    <table class="luci-table__table{{ " " + table_class if table_class }}" {% if id %} id="{{ id }}" {% endif %}>
      {% if caption %}
        <caption>{{ caption }}</caption>
      {% endif %}
      <thead>
        <tr>
          {% if selected  %}
            <th scope="col" class="luci-table__header-select">
              {{ form_checkbox(checked=false, label=false, input_id=range(0, 100000) | random) }}
            </th>
          {% endif %}
          {% for column in headers %}
            <th class="{{ ' ' + column.class if column.class }}{{ ' luci-table__header-cell-sort--sorting' if column.sort }}" scope="col" {% if column.sort %} aria-sort="{{ column.sort }}" tabindex="0" {% endif %}>
              {% if column.show_hide %}
                  {{ popover(class="luci-popover--wide luci-popover--left luci-table__icon-action", heading="Show/Hide Columns",
                    icon_name="add",
                    button_style="button",
                      checkboxes=[
                          {
                              text:"Serial Number",
                              checked: true
                          },
                          {
                              text:"Cluster Serial Number"
                          },
                          {
                              text:"Cluster Name"
                          },
                          {
                              text:"Remote Cluster Serial Number"
                          }
                      ]
                  ) }}
              {% else %}
                {% if column.sort %}
                  <span class="luci-table__sort-label">
                    {{ column.text | safe }}
                  </span>
                {% else %}
                  {{ column.text | safe }}
                {% endif %}
              </th>
            {% endif %}
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for row in data %}
          <tr {% if row.class or row.expandable %} class="{{ 'luci-table__row--expandable' if row.expandable }}{{ ' ' + row.class if row.class }}" {% endif %}>
            {% if selected %}
              {% set checked = row.checked %}
              <td>{{ form_checkbox(checked=checked, label=false, input_id=range(0, 100000) | random) }}</td>
            {% endif %}
            {% for cell in row.data %}
              <td {% if cell.class %} class="{{ cell.class }}" {% endif %}{% if cell.colspan %} colspan="{{ cell.colspan }}" {% endif %}>
                {% if cell.status == 'warning' or cell.status == '' %}
                  <div class="luci-table__cell-status">
                    {% if cell.status == 'warning' %}
                      {{ icon(name=cell.status, class="luci-icon--size-sm luci-icon-" + cell.status) }}
                    {% endif %}
                    <span class="luci-table__cell-status-text">{{ cell.text }}</span>
                  </div>
                  {% elif cell.action %}
                    <div class="luci-table__cell-action" role="button">
                      {{ popover(class="luci-popover--left luci-table__icon-action") }}
                    </div>
                  {% else %}
                    {% if row.expandable and cell.class === 'luci-table__cell--indent' %}
                      {{ button(class="luci-table--expand-button luci-button--icon-only luci-button--flat luci-button--small", icon_left="expand") }}
                    {% endif %}
                    {{ cell.text | safe }}
                {% endif %}
              </td>
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endmacro %}

{% macro popover(
    class=false,
    heading=false,
    list=[
        {
            text:"Edit Details",
            href:"#"
        },
        {
            text:"View History",
            href:"#"
        },
        {
            text:"Decomission",
            href:"#"
        },
        {
            text:"Add Attachments",
            href:"#"
        },
        {
            text:"Not a Link"
        }
    ],
    checkboxes=false,
    icon_name="more",
    button_style="link"
) %}
    <div class="luci-popover{{ ' ' + class if class }}">
        {{ button(class="luci-button--icon-only luci-button--small luci-popover__button" + (" luci-button--flat" if button_style == "link"), icon_left=icon_name) }}
        <div class="luci-popover__content">
            {% if heading %}
                <div class="luci-popover__heading">{{ heading }}</div>
            {% endif %}
            {% if checkboxes %}
            <div class="luci-popover__body">
                <form class="luci-form" action="#" method="post">
                    <div class="luci-form__field-group">
                        {% for checkbox in checkboxes %}
                            {{ form_checkbox(input_id="checkbox" + range(0, 100000) | random, checked=checkbox.checked, label=checkbox.text) }}
                        {% endfor %}
                    </div>
                </form>
            </div>
            <div class="luci-popover__action">
                {{ button(class="luci-button--primary luci-button--small", text="Submit") }}
            </div>
            {% else %}
            <div class="luci-popover__body">
                <ul class="luci-popover__list">
                    {% for item in list %}
                    <li class="luci-popover__list-item">
                        <{{ 'a href="#" class="luci-link"' | safe if item.href else 'span' }}>
                            {{ item.text }}
                        </{{ 'a' if item.href else 'span' }}>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
    </div>
{% endmacro %}

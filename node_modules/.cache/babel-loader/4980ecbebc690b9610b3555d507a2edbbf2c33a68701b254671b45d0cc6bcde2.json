{"ast":null,"code":"'use client';\n\nimport { useState, useRef, useCallback, useEffect } from 'react';\nimport { useCallbackRef } from '../utils/use-callback-ref/use-callback-ref.mjs';\nfunction containsRelatedTarget(event) {\n  if (event.currentTarget instanceof HTMLElement && event.relatedTarget instanceof HTMLElement) {\n    return event.currentTarget.contains(event.relatedTarget);\n  }\n  return false;\n}\nfunction useFocusWithin({\n  onBlur,\n  onFocus\n} = {}) {\n  const [focused, setFocused] = useState(false);\n  const focusedRef = useRef(false);\n  const previousNode = useRef(null);\n  const onFocusRef = useCallbackRef(onFocus);\n  const onBlurRef = useCallbackRef(onBlur);\n  const _setFocused = useCallback(value => {\n    setFocused(value);\n    focusedRef.current = value;\n  }, []);\n  const handleFocusIn = useCallback(event => {\n    if (!focusedRef.current) {\n      _setFocused(true);\n      onFocusRef(event);\n    }\n  }, []);\n  const handleFocusOut = useCallback(event => {\n    if (focusedRef.current && !containsRelatedTarget(event)) {\n      _setFocused(false);\n      onBlurRef(event);\n    }\n  }, []);\n  const callbackRef = useCallback(node => {\n    if (!node) {\n      return;\n    }\n    if (previousNode.current) {\n      previousNode.current.removeEventListener(\"focusin\", handleFocusIn);\n      previousNode.current.removeEventListener(\"focusout\", handleFocusOut);\n    }\n    node.addEventListener(\"focusin\", handleFocusIn);\n    node.addEventListener(\"focusout\", handleFocusOut);\n    previousNode.current = node;\n  }, [handleFocusIn, handleFocusOut]);\n  useEffect(() => () => {\n    if (previousNode.current) {\n      previousNode.current.removeEventListener(\"focusin\", handleFocusIn);\n      previousNode.current.removeEventListener(\"focusout\", handleFocusOut);\n    }\n  }, []);\n  return {\n    ref: callbackRef,\n    focused\n  };\n}\nexport { useFocusWithin };","map":{"version":3,"names":["containsRelatedTarget","event","currentTarget","HTMLElement","relatedTarget","contains","useFocusWithin","onBlur","onFocus","focused","setFocused","useState","focusedRef","useRef","previousNode","onFocusRef","useCallbackRef","onBlurRef","_setFocused","useCallback","value","current","handleFocusIn","handleFocusOut","callbackRef","node","removeEventListener","addEventListener","useEffect","ref"],"sources":["C:\\Users\\fapfl\\my-react-app\\node_modules\\@mantine\\hooks\\src\\use-focus-within\\use-focus-within.ts"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from 'react';\nimport { useCallbackRef } from '../utils';\n\nfunction containsRelatedTarget(event: FocusEvent) {\n  if (event.currentTarget instanceof HTMLElement && event.relatedTarget instanceof HTMLElement) {\n    return event.currentTarget.contains(event.relatedTarget);\n  }\n\n  return false;\n}\n\nexport interface UseFocusWithinOptions {\n  onFocus?: (event: FocusEvent) => void;\n  onBlur?: (event: FocusEvent) => void;\n}\n\nexport interface UseFocusWithinReturnValue<T extends HTMLElement = any> {\n  ref: React.RefCallback<T | null>;\n  focused: boolean;\n}\n\nexport function useFocusWithin<T extends HTMLElement = any>({\n  onBlur,\n  onFocus,\n}: UseFocusWithinOptions = {}): UseFocusWithinReturnValue<T> {\n  const [focused, setFocused] = useState(false);\n  const focusedRef = useRef(false);\n  const previousNode = useRef<T | null>(null);\n\n  const onFocusRef = useCallbackRef(onFocus);\n  const onBlurRef = useCallbackRef(onBlur);\n\n  const _setFocused = useCallback((value: boolean) => {\n    setFocused(value);\n    focusedRef.current = value;\n  }, []);\n\n  const handleFocusIn = useCallback((event: FocusEvent) => {\n    if (!focusedRef.current) {\n      _setFocused(true);\n      onFocusRef(event);\n    }\n  }, []);\n\n  const handleFocusOut = useCallback((event: FocusEvent) => {\n    if (focusedRef.current && !containsRelatedTarget(event)) {\n      _setFocused(false);\n      onBlurRef(event);\n    }\n  }, []);\n\n  const callbackRef: React.RefCallback<T | null> = useCallback(\n    (node) => {\n      if (!node) {\n        return;\n      }\n\n      if (previousNode.current) {\n        previousNode.current.removeEventListener('focusin', handleFocusIn);\n        previousNode.current.removeEventListener('focusout', handleFocusOut);\n      }\n\n      node.addEventListener('focusin', handleFocusIn);\n      node.addEventListener('focusout', handleFocusOut);\n      previousNode.current = node;\n    },\n    [handleFocusIn, handleFocusOut]\n  );\n\n  useEffect(\n    () => () => {\n      if (previousNode.current) {\n        previousNode.current.removeEventListener('focusin', handleFocusIn);\n        previousNode.current.removeEventListener('focusout', handleFocusOut);\n      }\n    },\n    []\n  );\n\n  return { ref: callbackRef, focused };\n}\n"],"mappings":";;;;AAGA,SAASA,sBAAsBC,KAAA,EAAmB;EAChD,IAAIA,KAAA,CAAMC,aAAA,YAAyBC,WAAA,IAAeF,KAAA,CAAMG,aAAA,YAAyBD,WAAA,EAAa;IAC5F,OAAOF,KAAA,CAAMC,aAAA,CAAcG,QAAA,CAASJ,KAAA,CAAMG,aAAa;EACzD;EAEA,OAAO;AACT;AAYO,SAASE,eAA4C;EAC1DC,MAAA;EACAC;AACF,IAA2B,EAAC,EAAiC;EAC3D,MAAM,CAACC,OAAA,EAASC,UAAU,IAAIC,QAAA,CAAS,KAAK;EAC5C,MAAMC,UAAA,GAAaC,MAAA,CAAO,KAAK;EAC/B,MAAMC,YAAA,GAAeD,MAAA,CAAiB,IAAI;EAE1C,MAAME,UAAA,GAAaC,cAAA,CAAeR,OAAO;EACzC,MAAMS,SAAA,GAAYD,cAAA,CAAeT,MAAM;EAEvC,MAAMW,WAAA,GAAcC,WAAA,CAAaC,KAAA,IAAmB;IAClDV,UAAA,CAAWU,KAAK;IAChBR,UAAA,CAAWS,OAAA,GAAUD,KAAA;EACvB,GAAG,EAAE;EAEL,MAAME,aAAA,GAAgBH,WAAA,CAAalB,KAAA,IAAsB;IACvD,IAAI,CAACW,UAAA,CAAWS,OAAA,EAAS;MACvBH,WAAA,CAAY,IAAI;MAChBH,UAAA,CAAWd,KAAK;IAClB;EACF,GAAG,EAAE;EAEL,MAAMsB,cAAA,GAAiBJ,WAAA,CAAalB,KAAA,IAAsB;IACxD,IAAIW,UAAA,CAAWS,OAAA,IAAW,CAACrB,qBAAA,CAAsBC,KAAK,GAAG;MACvDiB,WAAA,CAAY,KAAK;MACjBD,SAAA,CAAUhB,KAAK;IACjB;EACF,GAAG,EAAE;EAEL,MAAMuB,WAAA,GAA2CL,WAAA,CAC9CM,IAAA,IAAS;IACR,IAAI,CAACA,IAAA,EAAM;MACT;IACF;IAEA,IAAIX,YAAA,CAAaO,OAAA,EAAS;MACxBP,YAAA,CAAaO,OAAA,CAAQK,mBAAA,CAAoB,WAAWJ,aAAa;MACjER,YAAA,CAAaO,OAAA,CAAQK,mBAAA,CAAoB,YAAYH,cAAc;IACrE;IAEAE,IAAA,CAAKE,gBAAA,CAAiB,WAAWL,aAAa;IAC9CG,IAAA,CAAKE,gBAAA,CAAiB,YAAYJ,cAAc;IAChDT,YAAA,CAAaO,OAAA,GAAUI,IAAA;EACzB,GACA,CAACH,aAAA,EAAeC,cAAc,EAChC;EAEAK,SAAA,CACE,MAAM,MAAM;IACV,IAAId,YAAA,CAAaO,OAAA,EAAS;MACxBP,YAAA,CAAaO,OAAA,CAAQK,mBAAA,CAAoB,WAAWJ,aAAa;MACjER,YAAA,CAAaO,OAAA,CAAQK,mBAAA,CAAoB,YAAYH,cAAc;IACrE;EACF,GACA,EAAC,CACH;EAEA,OAAO;IAAEM,GAAA,EAAKL,WAAA;IAAaf;EAAA,CAAQ;AACrC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}